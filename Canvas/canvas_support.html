<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
</head>

<body>
    <p id="support"></p>
    <canvas id="trails" style="border:1px solid;" width="500" height="500"></canvas>
    <canvas id="diagonal" style="border:1px solid;" width="200" height="200"></canvas>
    
    <script type="text/javascript">
		function canvasSupport() {
			try {
				document.createElement("canvas").getContext("2d");
				document.getElementById("support").innerHTML = "HTML5 Canvas is supported in your browser.";
			} catch (e) {
				document.getElementById("support").innerHTML = "HTML5 Canvas is not supported in your browser.";
			}
		}
		
		function drawDiagonal() {
			var canvas = document.getElementById("diagonal");
			var context = canvas.getContext("2d");
			
			context.save();
			
			context.translate(70, 140);
			
			context.beginPath();
			context.moveTo(0, 0);
			context.lineTo(70, -70);
			
			context.stroke();
			
			context.restore();
		}
		
		function createCanopyPath(context) {
			context.beginPath();
			
			context.moveTo(-25, -50);
			context.lineTo(-10, -80);
			context.lineTo(-20, -80);
			context.lineTo(-5, -110);
			context.lineTo(-15, -110);
			
			context.lineTo(0, -140);
			
			context.lineTo(15, -110);
			context.lineTo(5, -110);
			context.lineTo(20, -80);
			context.lineTo(10, -80);
			context.lineTo(25, -50);
			
			context.closePath();
		}
		
		function drawTrails(bark) {
			var canvas = document.getElementById("trails");
			var context = canvas.getContext("2d");
			
			context.save();
			context.translate(130, 250);
			createCanopyPath(context);
			
			context.lineWidth = 4;
			context.linJoin = "round";
			context.strokeStyle = "#663300";
			
			context.fillStyle = "#339900";
			context.fill();
			
			context.fillStyle = "#663300";
			context.drawImage(bark, -5, -50, 10, 50);
			//context.fillRect(-5, -50, 10, 50);
			
			context.stroke();
			//context.fill();
			context.restore();
		}
		
		function drawCurve() {
			var canvas = document.getElementById("trails");
			var context = canvas.getContext("2d");
			context.save();
			
			context.translate(-10, 350);
			context.beginPath();
			
			context.moveTo(0, 0);
			context.quadraticCurveTo(170, -50, 260, -190);
			
			context.quadraticCurveTo(310, -250, 410, -250);
			
			context.strokeStyle = "#663300";
			context.lineWidth = 20;
			context.stroke();
			context.restore();
		}
		
		function drawBark() {
			var bark = new Image();
			bark.src = "bark.jpg";
			bark.onload = function() {
				drawTrails(this);
			};
			
		}
		window.addEventListener("load", drawBark, true);
		window.addEventListener("load", drawCurve, true);
	</script>
</body>
</html>
